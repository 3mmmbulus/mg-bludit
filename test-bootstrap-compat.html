<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrap 5 å…¼å®¹æ€§æµ‹è¯•</title>
    <link rel="stylesheet" href="mgw-kernel/css/bootstrap.min.css">
    <style>
        body { padding: 20px; }
        .test-section { margin: 30px 0; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        .test-result { margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 3px; }
        .pass { color: #28a745; }
        .fail { color: #dc3545; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Bootstrap 5 ä¸ MGW å…¼å®¹æ€§æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>æµ‹è¯• 1: Alert ç»„ä»¶</h3>
            <div class="alert alert-warning alert-dismissible fade show" role="alert" id="test-alert">
                <strong>è¿™æ˜¯ä¸€ä¸ªè­¦å‘Š!</strong> ç‚¹å‡»å…³é—­æŒ‰é’®æµ‹è¯• alert ç»„ä»¶ã€‚
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <div class="test-result" id="alert-result">ç­‰å¾…æµ‹è¯•...</div>
        </div>

        <div class="test-section">
            <h3>æµ‹è¯• 2: Modal ç»„ä»¶</h3>
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#testModal">
                æ‰“å¼€ Modal
            </button>
            <div class="modal fade" id="testModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">æµ‹è¯• Modal</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p>Modal æ­£å¸¸å·¥ä½œ!</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å…³é—­</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="test-result" id="modal-result">ç­‰å¾…æµ‹è¯•...</div>
        </div>

        <div class="test-section">
            <h3>æµ‹è¯• 3: Dropdown ç»„ä»¶</h3>
            <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                    ä¸‹æ‹‰èœå•
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <li><a class="dropdown-item" href="#">é€‰é¡¹ 1</a></li>
                    <li><a class="dropdown-item" href="#">é€‰é¡¹ 2</a></li>
                    <li><a class="dropdown-item" href="#">é€‰é¡¹ 3</a></li>
                </ul>
            </div>
            <div class="test-result" id="dropdown-result">ç­‰å¾…æµ‹è¯•...</div>
        </div>

        <div class="test-section">
            <h3>æµ‹è¯• 4: jQuery äº‹ä»¶å…¼å®¹æ€§</h3>
            <button type="button" class="btn btn-info" id="test-keypress">æµ‹è¯• keypress</button>
            <input type="text" class="form-control mt-2" id="test-input" placeholder="åœ¨è¿™é‡Œè¾“å…¥...">
            <div class="test-result" id="event-result">ç­‰å¾…æµ‹è¯•...</div>
        </div>

        <div class="test-section">
            <h3>æµ‹è¯• 5: jQuery.Event æ„é€ å‡½æ•°</h3>
            <button type="button" class="btn btn-success" id="test-event-constructor">æµ‹è¯• Event æ„é€ </button>
            <div class="test-result" id="constructor-result">ç­‰å¾…æµ‹è¯•...</div>
        </div>

        <div class="test-section">
            <h3>æ§åˆ¶å°æ—¥å¿—</h3>
            <div class="test-result">
                <p>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯:</p>
                <ul>
                    <li>MGW å¯¹è±¡: <code id="mgw-check">æ£€æŸ¥ä¸­...</code></li>
                    <li>$ === MGW: <code id="dollar-check">æ£€æŸ¥ä¸­...</code></li>
                    <li>jQuery === MGW: <code id="jquery-check">æ£€æŸ¥ä¸­...</code></li>
                    <li>$.fn: <code id="fn-check">æ£€æŸ¥ä¸­...</code></li>
                    <li>$.Event: <code id="event-check">æ£€æŸ¥ä¸­...</code></li>
                    <li>$.fn.alert: <code id="alert-check">æ£€æŸ¥ä¸­...</code></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- æŒ‰ç…§æ­£ç¡®é¡ºåºåŠ è½½è„šæœ¬ -->
    <script src="mgw-kernel/js/maigewan-dom.js?v=1"></script>
    <script src="mgw-kernel/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // ç­‰å¾… DOM å®Œå…¨åŠ è½½
        $(document).ready(function() {
            console.log('ğŸ¯ å¼€å§‹ Bootstrap å…¼å®¹æ€§æµ‹è¯•');
            
            // åŸºç¡€æ£€æŸ¥
            $('#mgw-check').text(typeof MGW !== 'undefined' ? 'âœ“ å·²åŠ è½½' : 'âœ— æœªåŠ è½½').addClass(typeof MGW !== 'undefined' ? 'pass' : 'fail');
            $('#dollar-check').text($ === MGW ? 'âœ“ ç›¸åŒ' : 'âœ— ä¸åŒ').addClass($ === MGW ? 'pass' : 'fail');
            $('#jquery-check').text(jQuery === MGW ? 'âœ“ ç›¸åŒ' : 'âœ— ä¸åŒ').addClass(jQuery === MGW ? 'pass' : 'fail');
            $('#fn-check').text(typeof $.fn !== 'undefined' ? 'âœ“ å­˜åœ¨' : 'âœ— ä¸å­˜åœ¨').addClass(typeof $.fn !== 'undefined' ? 'pass' : 'fail');
            $('#event-check').text(typeof $.Event !== 'undefined' ? 'âœ“ å­˜åœ¨' : 'âœ— ä¸å­˜åœ¨').addClass(typeof $.Event !== 'undefined' ? 'pass' : 'fail');
            $('#alert-check').text(typeof $.fn.alert !== 'undefined' ? 'âœ“ å­˜åœ¨' : 'âœ— ä¸å­˜åœ¨').addClass(typeof $.fn.alert !== 'undefined' ? 'pass' : 'fail');
            
            // æµ‹è¯• 1: Alert
            try {
                const alertEl = document.getElementById('test-alert');
                if (alertEl) {
                    alertEl.addEventListener('closed.bs.alert', function() {
                        $('#alert-result').html('<span class="pass">âœ“ Alert å…³é—­äº‹ä»¶è§¦å‘æˆåŠŸ</span>');
                    });
                }
                $('#alert-result').html('<span class="pass">âœ“ Alert ç»„ä»¶åˆå§‹åŒ–æˆåŠŸ (ç‚¹å‡»å…³é—­æŒ‰é’®æµ‹è¯•)</span>');
            } catch (e) {
                $('#alert-result').html('<span class="fail">âœ— Alert åˆå§‹åŒ–å¤±è´¥: ' + e.message + '</span>');
            }
            
            // æµ‹è¯• 2: Modal
            try {
                const modalEl = document.getElementById('testModal');
                if (modalEl) {
                    modalEl.addEventListener('shown.bs.modal', function() {
                        $('#modal-result').html('<span class="pass">âœ“ Modal æ˜¾ç¤ºäº‹ä»¶è§¦å‘æˆåŠŸ</span>');
                    });
                }
                $('#modal-result').html('<span class="pass">âœ“ Modal ç»„ä»¶åˆå§‹åŒ–æˆåŠŸ (ç‚¹å‡»æŒ‰é’®æµ‹è¯•)</span>');
            } catch (e) {
                $('#modal-result').html('<span class="fail">âœ— Modal åˆå§‹åŒ–å¤±è´¥: ' + e.message + '</span>');
            }
            
            // æµ‹è¯• 3: Dropdown
            try {
                $('#dropdown-result').html('<span class="pass">âœ“ Dropdown ç»„ä»¶åˆå§‹åŒ–æˆåŠŸ (ç‚¹å‡»æŒ‰é’®æµ‹è¯•)</span>');
            } catch (e) {
                $('#dropdown-result').html('<span class="fail">âœ— Dropdown åˆå§‹åŒ–å¤±è´¥: ' + e.message + '</span>');
            }
            
            // æµ‹è¯• 4: keypress äº‹ä»¶
            try {
                $('#test-input').keypress(function(e) {
                    $('#event-result').html('<span class="pass">âœ“ keypress äº‹ä»¶è§¦å‘æˆåŠŸ! æŒ‰é”®ç : ' + e.which + '</span>');
                });
                $('#event-result').html('<span class="pass">âœ“ keypress æ–¹æ³•ç»‘å®šæˆåŠŸ (åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æµ‹è¯•)</span>');
            } catch (e) {
                $('#event-result').html('<span class="fail">âœ— keypress æ–¹æ³•å¤±è´¥: ' + e.message + '</span>');
            }
            
            // æµ‹è¯• 5: Event æ„é€ å‡½æ•°
            $('#test-event-constructor').click(function() {
                try {
                    const customEvent = $.Event('custom.test', { detail: 'test data' });
                    $('#constructor-result').html('<span class="pass">âœ“ Event æ„é€ å‡½æ•°å·¥ä½œæ­£å¸¸: ' + customEvent.type + '</span>');
                    console.log('åˆ›å»ºçš„äº‹ä»¶:', customEvent);
                } catch (e) {
                    $('#constructor-result').html('<span class="fail">âœ— Event æ„é€ å¤±è´¥: ' + e.message + '</span>');
                }
            });
            
            console.log('âœ… æ‰€æœ‰æµ‹è¯•å·²åˆå§‹åŒ–');
            console.log('MGW å¯¹è±¡:', MGW);
            console.log('$.fn.alert:', $.fn.alert);
            console.log('$.Event:', $.Event);
        });
    </script>
</body>
</html>
